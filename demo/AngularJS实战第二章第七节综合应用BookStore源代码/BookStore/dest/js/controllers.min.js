/*! BookStore 2015-02-12 */
var bookListModule=angular.module("BookListModule",[]);bookListModule.controller("BookListCtrl",function(a,b,c,d){a.filterOptions={filterText:"",useExternalFilter:!0},a.totalServerItems=0,a.pagingOptions={pageSizes:[5,10,20],pageSize:5,currentPage:1},a.setPagingData=function(b,c,d){var e=b.slice((c-1)*d,c*d);a.books=e,a.totalServerItems=b.length,a.$$phase||a.$apply()},a.getPagedDataAsync=function(c,e,f){setTimeout(function(){var g;if(f){var h=f.toLowerCase();b.get("../data/books"+d.bookType+".json").success(function(b){g=b.filter(function(a){return-1!=JSON.stringify(a).toLowerCase().indexOf(h)}),a.setPagingData(g,e,c)})}else b.get("../data/books"+d.bookType+".json").success(function(b){a.setPagingData(b,e,c)})},100)},a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage),a.$watch("pagingOptions",function(b,c){b!==c&&b.currentPage!==c.currentPage&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage,a.filterOptions.filterText)},!0),a.$watch("filterOptions",function(b,c){b!==c&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage,a.filterOptions.filterText)},!0),a.gridOptions={data:"books",rowTemplate:'<div style="height: 100%"><div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell "><div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }"> </div><div ng-cell></div></div></div>',multiSelect:!1,enableCellSelection:!0,enableRowSelection:!1,enableCellEdit:!0,enablePinning:!0,columnDefs:[{field:"index",displayName:"序号",width:60,pinnable:!1,sortable:!1},{field:"name",displayName:"书名",enableCellEdit:!0},{field:"author",displayName:"作者",enableCellEdit:!0,width:220},{field:"pubTime",displayName:"出版日期",enableCellEdit:!0,width:120},{field:"price",displayName:"定价",enableCellEdit:!0,width:120,cellFilter:'currency:"￥"'},{field:"bookId",displayName:"操作",enableCellEdit:!1,sortable:!1,pinnable:!1,cellTemplate:'<div><a ui-sref="bookdetail({bookId:row.getProperty(col.field)})" id="{{row.getProperty(col.field)}}">详情</a></div>'}],enablePaging:!0,showFooter:!0,totalServerItems:"totalServerItems",pagingOptions:a.pagingOptions,filterOptions:a.filterOptions}});var bookDetailModule=angular.module("BookDetailModule",[]);bookDetailModule.controller("BookDetailCtrl",function(a,b,c,d){});